<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>课程12.UITableView(1)</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><img src="http://static.zybuluo.com/zhuoming/9y9ocj9x0iw2k87m7br254g1/logo.png" width="300" height="100"><span style="float:right;" data-anchor-id="89fb"><b>求知若渴 求真教育</b></span><div class="md-section-divider"></div><h1 data-anchor-id="ncyo" id="课程12uitableview1">课程12.UITableView(1)</h1><p data-anchor-id="14k8"><code>iOS</code> <code>UI</code></p><hr><p data-anchor-id="hccz"><div class="toc"><div class="toc">
<ul>
<li><a href="#课程12uitableview1">课程12.UITableView(1)</a><ul>
<li><a href="#一学习目标">一、学习目标</a></li>
<li><a href="#二课程内容">二、课程内容</a><ul>
<li><a href="#1uitableview介绍">1.UITableView介绍</a></li>
<li><a href="#2uitableview初步使用">2.UITableView初步使用</a></li>
<li><a href="#3uitableviewcell的介绍和重用机制">3.UITableViewCell的介绍和重用机制</a></li>
<li><a href="#4补充">4.补充</a><ul>
<li><a href="#1如何设置行高">1.如何设置行高</a></li>
<li><a href="#2如何设置段头标题段尾">2.如何设置段头标题、段尾</a></li>
<li><a href="#6如何让表处于编辑模式和取消编辑模式">6.如何让表处于编辑模式和取消编辑模式</a></li>
<li><a href="#4如何删除表中一行">4.如何删除表中一行</a></li>
<li><a href="#5如何定制删除上面的文字">5.如何定制删除上面的文字</a></li>
<li><a href="#7如何让指定行可以编辑">7.如何让指定行可以编辑</a></li>
<li><a href="#8如何做索引">8.如何做索引</a></li>
<li><a href="#9如何跳转到某个特定段">9.如何跳转到某个特定段</a></li>
<li><a href="#10如何移动一行">10.如何移动一行</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#三课程作业">三、课程作业</a></li>
</ul>
</li>
</ul>
</div>
</div>
</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="ydnl" id="一学习目标"><strong>一、学习目标</strong></h2><ul data-anchor-id="nyzp">
<li>UITableView初步使用</li>
<li>UITableView分段功能</li>
<li>UITableViewCell重用机制</li>
</ul><hr><div class="md-section-divider"></div><h2 data-anchor-id="rr9u" id="二课程内容"><strong>二、课程内容</strong></h2><div class="md-section-divider"></div><h3 data-anchor-id="ly0d" id="1uitableview介绍"><strong>1.UITableView介绍</strong></h3><p data-anchor-id="pgjm">几乎所有的App都有表格视图,tableView主要展示一类相似的数据,比如我们之前的系统自带的设置应用。 <br>
<img src="http://static.zybuluo.com/zhuoming/r37b67osjoxd5c24yajvu5ng/xib12.png" alt="xib12.png-40.6kB" title=""></p><p data-anchor-id="mgnb">接下来我们利用UITableView实现一个通讯录，而在这之前我们需要了解UITableView的两个代理中负责内容的<strong>UITableViewDataSource</strong>是用来告诉UITableView一共有几组数据，每组数据有几行，每行该显示什么数据。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="of53"><ol class="linenums"><li class="L0"><code><span class="pun">展示数据的过程：</span></code></li><li class="L1"><code><span class="com">// 1. 可选实现 如果不实现 默认是1组</span></code></li><li class="L2"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">numberOfSectionsInTableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">;</span><span class="pln">              </span><span class="com">// Default is 1 if not implemented</span></code></li><li class="L3"><code><span class="com">// 2. 必须实现 返回某一组有多少行</span></code></li><li class="L4"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView numberOfRowsInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span><span class="pun">;</span></code></li><li class="L5"><code><span class="com">// 3. 根据下标indexPath 返回一个UITableViewCell</span></code></li><li class="L6"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UITableViewCell</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView cellForRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span><span class="pun">;</span></code></li><li class="L7"><code><span class="com">// 4.每组的头部显示的文字</span></code></li><li class="L8"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nullable </span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView titleForHeaderInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span><span class="pun">;</span><span class="pln">    </span></code></li><li class="L9"><code><span class="com">// 5.每组的最后显示的文字</span></code></li><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nullable </span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView titleForFooterInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="v77d" id="2uitableview初步使用"><strong>2.UITableView初步使用</strong></h3><p data-anchor-id="pimb">创建一个UITableView，并添加到ViewController.view,同时设置两个ViewController成为tableView的代理和数据源。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="u0si"><ol class="linenums"><li class="L0"><code><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UITableView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">view</span><span class="pun">.</span><span class="pln">bounds style</span><span class="pun">:</span><span class="typ">UITableViewStyleGrouped</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">view addSubview</span><span class="pun">:</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview</span><span class="pun">];</span></code></li><li class="L2"><code><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview</span><span class="pun">.</span><span class="pln">dataSource </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">;</span></code></li><li class="L3"><code><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview</span><span class="pun">.</span><span class="kwd">delegate</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">;</span></code></li></ol></pre><p data-anchor-id="f4c9">接下来我们模拟一个通许录，首先新建一个person类</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="udl3"><ol class="linenums"><li class="L0"><code><span class="lit">@interface</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">NSObject</span></code></li><li class="L1"><code><span class="com">// 姓名</span></code></li><li class="L2"><code><span class="lit">@property</span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln">copy</span><span class="pun">)</span><span class="typ">NSString</span><span class="pun">*</span><span class="pln"> name</span><span class="pun">;</span></code></li><li class="L3"><code><span class="com">// 电话</span></code></li><li class="L4"><code><span class="lit">@property</span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln">copy</span><span class="pun">)</span><span class="typ">NSString</span><span class="pun">*</span><span class="pln"> phoneNum</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">instancetype</span><span class="pun">)</span><span class="pln">initWithName</span><span class="pun">:(</span><span class="typ">NSString</span><span class="pun">*)</span><span class="pln">name </span><span class="typ">PhoneNum</span><span class="pun">:(</span><span class="typ">NSString</span><span class="pun">*)</span><span class="pln">phoneNum</span><span class="pun">;</span></code></li><li class="L6"><code><span class="lit">@end</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="lit">@implementation</span><span class="pln"> </span><span class="typ">Person</span></code></li><li class="L9"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">instancetype</span><span class="pun">)</span><span class="pln">initWithName</span><span class="pun">:(</span><span class="typ">NSString</span><span class="pun">*)</span><span class="pln">name </span><span class="typ">PhoneNum</span><span class="pun">:(</span><span class="typ">NSString</span><span class="pun">*)</span><span class="pln">phoneNum</span></code></li><li class="L0"><code><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">super</span><span class="pln"> init</span><span class="pun">])</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">        _name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">        _phoneNum </span><span class="pun">=</span><span class="pln"> phoneNum</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pun">}</span></code></li><li class="L7"><code><span class="lit">@end</span></code></li></ol></pre><p data-anchor-id="i2dg">给数组创建一个数据数组</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="kxz1"><ol class="linenums"><li class="L0"><code><span class="com">// 创建一个可变空数组</span></code></li><li class="L1"><code><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[@[]</span><span class="pln"> mutableCopy</span><span class="pun">];</span></code></li><li class="L2"><code><span class="com">// 往里面添加多个person对象</span></code></li><li class="L3"><code><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> p1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">Person</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithName</span><span class="pun">:@</span><span class="str">"张三"</span><span class="pln"> </span><span class="typ">PhoneNum</span><span class="pun">:@</span><span class="str">"181 7897 7262"</span><span class="pun">];</span></code></li><li class="L4"><code><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> p2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">Person</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithName</span><span class="pun">:@</span><span class="str">"张四"</span><span class="pln"> </span><span class="typ">PhoneNum</span><span class="pun">:@</span><span class="str">"190 7812 7234"</span><span class="pun">];</span></code></li><li class="L5"><code><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> p3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">Person</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithName</span><span class="pun">:@</span><span class="str">"张五"</span><span class="pln"> </span><span class="typ">PhoneNum</span><span class="pun">:@</span><span class="str">"145 7137 7242"</span><span class="pun">];</span></code></li><li class="L6"><code><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> p4 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">Person</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithName</span><span class="pun">:@</span><span class="str">"张六"</span><span class="pln"> </span><span class="typ">PhoneNum</span><span class="pun">:@</span><span class="str">"153 1293 7262"</span><span class="pun">];</span></code></li><li class="L7"><code><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> p5 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">Person</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithName</span><span class="pun">:@</span><span class="str">"张七"</span><span class="pln"> </span><span class="typ">PhoneNum</span><span class="pun">:@</span><span class="str">"121 1122 2332"</span><span class="pun">];</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr addObjectsFromArray</span><span class="pun">:@[</span><span class="pln">p1</span><span class="pun">,</span><span class="pln">p2</span><span class="pun">,</span><span class="pln">p3</span><span class="pun">,</span><span class="pln">p4</span><span class="pun">,</span><span class="pln">p5</span><span class="pun">]];</span></code></li></ol></pre><p data-anchor-id="0gi5">接下来实现UitableView的datasource</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zl16"><ol class="linenums"><li class="L0"><code><span class="com">#pragma</span><span class="pln"> mark </span><span class="pun">-</span><span class="pln"> </span><span class="typ">UITableViewDataSource</span></code></li><li class="L1"><code><span class="com">// 返回一共几组</span></code></li><li class="L2"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">numberOfSectionsInTableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span></code></li><li class="L3"><code><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pun">}</span></code></li><li class="L6"><code><span class="com">// 根据组号返回行数</span></code></li><li class="L7"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView numberOfRowsInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span></code></li><li class="L8"><code><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr</span><span class="pun">.</span><span class="pln">count</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 根据数组的数据返回行数</span></code></li><li class="L0"><code><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UITableViewCell</span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView cellForRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span></code></li><li class="L3"><code><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">    </span><span class="typ">UITableViewCell</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UITableViewCell</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithStyle</span><span class="pun">:</span><span class="typ">UITableViewCellStyleDefault</span><span class="pln"> reuseIdentifier</span><span class="pun">:@</span><span class="str">"cell"</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    </span><span class="com">// 根据index拿到该显示的对象</span></code></li><li class="L6"><code><span class="pln">    </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr</span><span class="pun">[</span><span class="pln">indexPath</span><span class="pun">.</span><span class="pln">row</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">    cell</span><span class="pun">.</span><span class="pln">textLabel</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">NSString</span><span class="pln"> stringWithFormat</span><span class="pun">:@</span><span class="str">"%@  %@"</span><span class="pun">,</span><span class="pln">person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">,</span><span class="pln">person</span><span class="pun">.</span><span class="pln">phoneNum</span><span class="pun">];</span></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> cell</span><span class="pun">;</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="ia6k">运行效果如下</p><p data-anchor-id="8e9f"><img src="http://static.zybuluo.com/zhuoming/kbmp7wscfosfnkjy5wdcjiu3/xib11.png" alt="xib11.png-31kB" title=""> <br>
接下来我们将返回的组数改成3，并加上 另外两个数据源方法用来返回header和footer的文字。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="jz5c"><ol class="linenums"><li class="L0"><code><span class="com">// 返回每一组的Header title</span></code></li><li class="L1"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSString</span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView titleForHeaderInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span></code></li><li class="L2"><code><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">[</span><span class="typ">NSString</span><span class="pln"> stringWithFormat</span><span class="pun">:@</span><span class="str">"通讯录 header %ld"</span><span class="pun">,</span><span class="pln">section</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pun">}</span></code></li><li class="L5"><code><span class="com">// 返回每一组的Footer title</span></code></li><li class="L6"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSString</span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView titleForFooterInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span></code></li><li class="L7"><code><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">[</span><span class="typ">NSString</span><span class="pln"> stringWithFormat</span><span class="pun">:@</span><span class="str">"通讯录 footer %ld"</span><span class="pun">,</span><span class="pln">section</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="9pq9"><img src="http://static.zybuluo.com/zhuoming/bcyml2jgzstox4qquw0hmlw7/xib14.png" alt="xib14.png-49kB" title=""></p><div class="md-section-divider"></div><h3 data-anchor-id="fzv9" id="3uitableviewcell的介绍和重用机制"><strong>3.UITableViewCell的介绍和重用机制</strong></h3><p data-anchor-id="e5mm">UITableView的每一行都是一个UITableViewCell,通过<code>dataSource的 tableView:cellForRowAtIndexPath:</code>方法来初始化每⼀行 <br>
UITableViewCell内部有个默认的子视图:<strong>contentView</strong>,contentView是UITableViewCell所显示内容的父视图,可显示一些辅助指示视图。辅助指示视图的作⽤是显示一个表示动作的图标,可以通过设置UITableViewCellaccessoryType来显示：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="qfba"><ol class="linenums"><li class="L0"><code><span class="typ">UITableViewCellAccessoryNone</span><span class="pln">   </span><span class="com">//cell没有任何的样式  </span></code></li><li class="L1"><code><span class="typ">UITableViewCellAccessoryDisclosureIndicator</span><span class="pln">  </span><span class="com">//cell的右边有一个小箭头，距离右边有十几像素；  </span></code></li><li class="L2"><code><span class="typ">UITableViewCellAccessoryDetailDisclosureButton</span><span class="pln">  </span><span class="com">//cell右边有一个蓝色的圆形button；  </span></code></li><li class="L3"><code><span class="typ">UITableViewCellAccessoryCheckmark</span><span class="pln">  </span><span class="com">//cell右边的形状是对号；</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pun">还可以通过</span><span class="pln">cell</span><span class="pun">的</span><span class="pln">accessoryView</span><span class="pun">属性来自定义辅助指示视图(⽐如往右边放一个开关)</span></code></li></ol></pre><p data-anchor-id="tlx5">Cell系统自带的风格</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="0hmx"><ol class="linenums"><li class="L0"><code><span class="kwd">typedef</span><span class="pln"> NS_ENUM</span><span class="pun">(</span><span class="typ">NSInteger</span><span class="pun">,</span><span class="pln"> </span><span class="typ">UITableViewCellStyle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="typ">UITableViewCellStyleDefault</span><span class="pun">,</span><span class="pln">    </span><span class="com">// 默认风格，自带标题和一个图片视图，图片在左</span></code></li><li class="L2"><code><span class="pln">    </span><span class="typ">UITableViewCellStyleValue1</span><span class="pun">,</span><span class="pln">     </span><span class="com">// 只有标题和副标题 副标题在右边</span></code></li><li class="L3"><code><span class="pln">    </span><span class="typ">UITableViewCellStyleValue2</span><span class="pun">,</span><span class="pln">     </span><span class="com">// 只有标题和副标题，副标题在左边标题的下边</span></code></li><li class="L4"><code><span class="pln">    </span><span class="typ">UITableViewCellStyleSubtitle</span><span class="pln">    </span><span class="com">// 自带图片视图和主副标题，主副标题都在左边，副标题在下</span></code></li><li class="L5"><code><span class="pun">};</span></code></li></ol></pre><p data-anchor-id="dkwt"><strong>cell的工作</strong> <br>
在程序执行的时候，能看到多少条，它就创建多少条数据，如果视图滚动那么再创建新显示的内容。（系统自动调用）。即当一个cell出现在视野范围内的时候，就会调用创建一个cell。这样的逻辑看上去没有什么问题，但是假如通许录有一千个数据，我们是否需要创建一千个UITableViewCell？ <br>
当创建调用的时候，我们使用nslog打印消息，并打印创建的cell的地址。我们发现如果数据量非常大，用户在短时间内来回滚动的话，那么会创建大量的cell,一直开辟空间，且如果是往回滚，通过打印地址，我们会发现它并没有重用之前已经创建的cell，而是重新创建，开辟新的存储空间。也就是远不止一千个Cell。</p><p data-anchor-id="qx4t"><strong>cell的重用原理</strong></p><p data-anchor-id="o3u9">（1） 随着tableView的不断滚动，系统就会不断的调用<code>- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath</code>来创建无数个UITableViewCell。而iOS设备的内存有限,如果用UITableView显示成千上万条数据,就需要成千上万 个UITableViewCell对象的话,那将会耗尽iOS设备的内存。要解决该问题,需要重用UITableViewCell对象</p><p data-anchor-id="wn30">（2）重⽤原理:当滚动列表时,部分UITableViewCell会移出窗口,UITableView会将窗口外的UITableViewCell放入一个对象池中,等待重用。当UITableViewdataSourceUITableViewCelldataSource会先查看这个对象池,如果池中有未使用的 UITableViewCelldataSource则会用新的数据来配置这个UITableViewCell,然后返回给 UITableView,重新显示到窗口中,从而避免创建新对象 。这样可以让创建的cell的数量维持在很低的水平，如果一个窗口中只能显示5个cell，那么cell重用之后，只需要创建6个cell就够了。</p><p data-anchor-id="sv1b">（3）注意点：还有⼀个非常重要的问题:有时候需要自定义UITableViewCell(用⼀个子类继 承UITableViewCell),而且每⼀行⽤的不一定是同一种UITableViewCell,所以一 个UITableView可能拥有不同类型的UITableViewCell,对象池中也会有很多不同类型的 UITableViewCell,那么UITableView在重⽤用UITableViewCell时可能会得到错误类型的 UITableViewCell</p><p data-anchor-id="ua3z">解决⽅方案UITableViewCellNSString *reuseIdentifier属性,可以在初始化UITableViewCell的时候传入一个特定的字符串标识来设置reuseIdentifier(UITableViewCellUITableViewdataSourceUITableViewCell时,先 通过一个字符串标识到对象池中查找对应类型的UITableViewCell对象,如果有,就重用,如果没有,就传入这个字符串标识来初始化⼀一个UITableViewCell</p><p data-anchor-id="o4an"><strong>缓存优化的思路</strong>： <br>
（1）先去缓存池中查找是否有满足条件(reuseIdentifier)的cell，若有那就直接拿来 <br>
（2）若没有，就自己创建一个cell并且设置一个唯一的标记（reuseIdentifier） <br>
（3）给cell设置数据</p><p data-anchor-id="q7ga">定义变量用来保存重用标记的值，这里不推荐使用宏（#define来处理）,因为该变量只在这个作用域的内部使用，且如果使用宏定义的话，定义和使用位置太分散，不利于阅读程序。由于其值不变，没有必要每次都开辟一次，所以用static定义为一个静态变量。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="rkg8"><ol class="linenums"><li class="L0"><code><span class="com">// 1.定义 reuseIdentifier</span></code></li><li class="L1"><code><span class="kwd">static</span><span class="pln"> </span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> ID </span><span class="pun">=</span><span class="pln"> </span><span class="pun">@</span><span class="str">"cell"</span><span class="pun">;</span></code></li><li class="L2"><code><span class="com">// 2.尝试从缓存池中找</span></code></li><li class="L3"><code><span class="typ">UITableViewCell</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tableView dequeueReusableCellWithIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L4"><code><span class="com">// 3。如果没有 创建一个并附上reuseIdentifier</span></code></li><li class="L5"><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">cell</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">    cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UITableViewCell</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithStyle</span><span class="pun">:</span><span class="typ">UITableViewCellStyleDefault</span><span class="pln"> reuseIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pun">}</span></code></li><li class="L8"><code><span class="com">// 4.根据index拿到该显示的对象数据</span></code></li><li class="L9"><code><span class="typ">Person</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr</span><span class="pun">[</span><span class="pln">indexPath</span><span class="pun">.</span><span class="pln">row</span><span class="pun">];</span></code></li><li class="L0"><code><span class="pln">cell</span><span class="pun">.</span><span class="pln">textLabel</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">NSString</span><span class="pln"> stringWithFormat</span><span class="pun">:@</span><span class="str">"%@  %@"</span><span class="pun">,</span><span class="pln">person</span><span class="pun">.</span><span class="pln">name</span><span class="pun">,</span><span class="pln">person</span><span class="pun">.</span><span class="pln">phoneNum</span><span class="pun">];</span></code></li><li class="L1"><code><span class="com">// 5.返回cell</span></code></li><li class="L2"><code><span class="kwd">return</span><span class="pln"> cell</span><span class="pun">;</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="r50n" id="4补充"><strong>4.补充</strong></h3><div class="md-section-divider"></div><h4 data-anchor-id="w5sc" id="1如何设置行高">1.如何设置行高</h4><p data-anchor-id="oexf">系统默认的行高是44，通过tableView的<code>rowHeight</code>可以设置<strong>所有的行高</strong>。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="japk"><ol class="linenums"><li class="L0"><code><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview</span><span class="pun">.</span><span class="pln">rowHeight </span><span class="pun">=</span><span class="pln"> </span><span class="lit">80.f</span><span class="pun">;</span></code></li></ol></pre><p data-anchor-id="pwhz"><img src="http://static.zybuluo.com/zhuoming/8w41rau2tvrajmjrq57h1eza/xib.png" alt="xib.png-34.8kB" title=""></p><p data-anchor-id="8ext">我们也可以通过代理方法<code>heightForRowAtIndexPath</code>根据indexPath来确定行高。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zxuw"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">CGFloat</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView heightForRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">indexPath</span><span class="pun">.</span><span class="pln">section </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="com">// 第0组高是80</span></code></li><li class="L3"><code><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">80</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">44</span><span class="pun">;</span><span class="com">// 其他高度为40</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="oyk3" id="2如何设置段头标题段尾">2.如何设置段头标题、段尾</h4><p data-anchor-id="nb9j">如何设置标题参考上文，现在介绍如何段头、段尾的自定义View。主要方法是通过<code>viewForHeaderInSection</code>设置headerView,同时还需要来设置高度</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="wtar"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">CGFloat</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView heightForHeaderInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">160.f</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li><li class="L4"><code><span class="com">// 返回headerView </span></code></li><li class="L5"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UIView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView viewForHeaderInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span></code></li><li class="L6"><code><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">    </span><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> imgV </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">160</span><span class="pun">)];</span></code></li><li class="L8"><code><span class="pln">    imgV</span><span class="pun">.</span><span class="pln">image </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:@</span><span class="str">"01124856a19c4232f875520f46fe88.jpg"</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> imgV</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pun">}</span></code></li><li class="L1"><code><span class="com">// 返回footerView </span></code></li><li class="L2"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UIView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView viewForFooterInSection</span><span class="pun">:(</span><span class="typ">NSInteger</span><span class="pun">)</span><span class="pln">section</span></code></li><li class="L3"><code><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">    </span><span class="typ">UIButton</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> btn </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIButton</span><span class="pln"> buttonWithType</span><span class="pun">:</span><span class="typ">UIButtonTypeContactAdd</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> btn</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="c7mq"><img src="http://static.zybuluo.com/zhuoming/agkuqxdowp9vpuh8ny94dje3/xib15.png" alt="xib15.png-93.4kB" title=""></p><div class="md-section-divider"></div><h4 data-anchor-id="wtov" id="6如何让表处于编辑模式和取消编辑模式">6.如何让表处于编辑模式和取消编辑模式</h4><p data-anchor-id="l8hg">我们通过修改tableView的<code>editing</code>属性就可达到tableView的修改效果.对表格的增删改查都要记住一定要更改数据模型数据，不然一刷新就回复成之前的状态了。 <br>
利用一个按钮来更改修改可编辑状态</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="qrtd"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">btnCLick</span><span class="pun">:(</span><span class="typ">UIButton</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">btn</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    btn</span><span class="pun">.</span><span class="pln">selected </span><span class="pun">=</span><span class="pln"> </span><span class="pun">!</span><span class="pln">btn</span><span class="pun">.</span><span class="pln">selected</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">    </span><span class="com">// 直接对属性赋值 没有动画</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview setEditing</span><span class="pun">:</span><span class="pln">btn</span><span class="pun">.</span><span class="pln">selected animated</span><span class="pun">:</span><span class="pln">YES</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="sz1p" id="4如何删除表中一行">4.如何删除表中一行</h4><p data-anchor-id="f5nw">一定要实现这个方法，否则没有任何效果，这个方法会由编辑按钮触发。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="xdsf"><ol class="linenums"><li class="L0"><code><span class="pun">-(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView commitEditingStyle</span><span class="pun">:(</span><span class="typ">UITableViewCellEditingStyle</span><span class="pun">)</span><span class="pln">editingStyle forRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">editingStyle</span><span class="pun">==</span><span class="typ">UITableViewCellEditingStyleDelete</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">        </span><span class="com">// 1. 一定要先删除数据源数组中的数据</span></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr removeObjectAtIndex</span><span class="pun">:</span><span class="pln">indexPath</span><span class="pun">.</span><span class="pln">row</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">        </span><span class="com">// 2. 删除单元格的某一行时，在用动画效果实现删除过程</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">tableView deleteRowsAtIndexPaths</span><span class="pun">:[</span><span class="typ">NSArray</span><span class="pln"> arrayWithObject</span><span class="pun">:</span><span class="pln">indexPath</span><span class="pun">]</span><span class="pln"> withRowAnimation</span><span class="pun">:</span><span class="typ">UITableViewRowAnimationAutomatic</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="2cjb">效果如下 <br>
<img src="http://static.zybuluo.com/zhuoming/n0o8m410pha0tk7ulh672peg/xib13.gif" alt="xib13.gif-3132.6kB" title=""> <br>
实现一下代理方法可以实现左滑动进入编辑，不需要点击触发编辑状态。实现效果如下 <br>
<img src="http://static.zybuluo.com/zhuoming/7cc8u542jy074be7e1ir97xq/xib15.gif" alt="xib15.gif-3726.6kB" title=""></p><div class="md-section-divider"></div><h4 data-anchor-id="rmc3" id="5如何定制删除上面的文字">5.如何定制删除上面的文字</h4><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="wvu8"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView titleForDeleteConfirmationButtonForRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">@</span><span class="str">"删除！"</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="7b10">效果如下 <br>
<img src="http://static.zybuluo.com/zhuoming/9spofpws3p74g9uoxjrla9k3/xib16.png" alt="xib16.png-30.6kB" title=""></p><div class="md-section-divider"></div><h4 data-anchor-id="98cw" id="7如何让指定行可以编辑">7.如何让指定行可以编辑</h4><p data-anchor-id="ipz2">可通过代理实现具体某行可以编辑</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1l3u"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">BOOL</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView canEditRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> YES</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="l15k">效果如下 <br>
<img src="http://static.zybuluo.com/zhuoming/k5jo6lqjii8or7nofgb1m4im/xib.gif" alt="xib.gif-2747.6kB" title=""></p><div class="md-section-divider"></div><h4 data-anchor-id="otsv" id="8如何做索引">8.如何做索引</h4><p data-anchor-id="qr86">我们常常看到tableView的右侧有一串字符，比如通讯录，可以通过滑动索引来快速定位某一组。我自定义一个通讯录，数据结构如下 <br>
<img src="http://static.zybuluo.com/zhuoming/tckx512xqhg6fxgiielz0gve/xib17.png" alt="xib17.png-59.8kB" title=""> <br>
我们通过一个字符串数组来返回索引</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h9o3"><ol class="linenums"><li class="L0"><code><span class="com">//返回索引数组</span></code></li><li class="L1"><code><span class="pun">-(</span><span class="typ">NSArray</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">sectionIndexTitlesForTableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span></code></li><li class="L2"><code><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">sections</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="885u"><img src="http://static.zybuluo.com/zhuoming/bc58kjjdhf2figdbygnlxln5/xib19.gif" alt="xib19.gif-1043.2kB" title=""></p><div class="md-section-divider"></div><h4 data-anchor-id="nggu" id="9如何跳转到某个特定段">9.如何跳转到某个特定段</h4><p data-anchor-id="gckl">我们知道通过以下代码跳动到某一行</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="vzp8"><ol class="linenums"><li class="L0"><code><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*</span><span class="pln">index</span><span class="pun">=[</span><span class="typ">NSIndexPath</span><span class="pln"> indexPathForRow</span><span class="pun">:</span><span class="lit">0</span><span class="pln"> inSection</span><span class="pun">:</span><span class="lit">0</span><span class="pun">];</span><span class="pln">    </span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">tableview selectRowAtIndexPath</span><span class="pun">:</span><span class="pln">index animated</span><span class="pun">:</span><span class="pln">YES scrollPosition</span><span class="pun">:</span><span class="typ">UITableViewScrollPositionBottom</span><span class="pun">];</span><span class="pln"> </span></code></li></ol></pre><div class="md-section-divider"></div><h4 data-anchor-id="8gr5" id="10如何移动一行">10.如何移动一行</h4><p data-anchor-id="m9oa">有时候我们需要移动tableView里面cell的顺序，本质是改变数据源数组的顺序。我们只需要实现代理方法</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="auco"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView moveRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">sourceIndexPath toIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">destinationIndexPath</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="com">//这里应该在这里实现数据源的排序操作,不然一旦滚动后，数据会回复原样</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">personArr exchangeObjectAtIndex</span><span class="pun">:</span><span class="pln">sourceIndexPath</span><span class="pun">.</span><span class="pln">row withObjectAtIndex</span><span class="pun">:</span><span class="pln">destinationIndexPath</span><span class="pun">.</span><span class="pln">row</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="fjo7"><img src="http://static.zybuluo.com/zhuoming/c1v0rcx8zbvbrtna2c7d0p35/xib17.gif" alt="xib17.gif-4397.7kB" title=""></p><div class="md-section-divider"></div><h2 data-anchor-id="qxob" id="三课程作业"><strong>三、课程作业</strong></h2><blockquote data-anchor-id="nwb9" class="white-blockquote">
  <ul>
  <li>1.做一个简单的通许录显示班级同学的名字和手机号</li>
  <li>2.添加一个按钮，点击弹出一个View用来录入姓名和手机号，并显示在最后。</li>
  <li>3.添加一个按钮实现表格的编辑功能（删除和移动）。</li>
  <li>4.section的headerView添加一个ScrollView的广告栏，footer的title设置成自己的名字。</li>
  </ul>
</blockquote></div>
</body>
</html>