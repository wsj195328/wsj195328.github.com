<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>课程13.UITableView(2)</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><img src="http://static.zybuluo.com/zhuoming/9y9ocj9x0iw2k87m7br254g1/logo.png" width="300" height="100"><span style="float:right;" data-anchor-id="bw9j"><b>求知若渴 求真教育</b></span><div class="md-section-divider"></div><h1 data-anchor-id="yh1d" id="课程13uitableview2">课程13.UITableView(2)</h1><p data-anchor-id="yufx"><code>UI</code> <code>iOS</code></p><hr><p data-anchor-id="clay"><div class="toc"><div class="toc">
<ul>
<li><a href="#课程13uitableview2">课程13.UITableView(2)</a><ul>
<li><a href="#一学习目标">一、学习目标</a></li>
<li><a href="#二课程内容">二、课程内容</a><ul>
<li><a href="#1代码自定义uitableviewcell">1.代码自定义UITableViewCell</a></li>
<li><a href="#2代码自定义uitableviewcell优化">2.代码自定义UITableViewCell优化</a></li>
<li><a href="#3代码自定义uitableviewcell">3.代码自定义UITableViewCell</a></li>
<li><a href="#4mvc的应用">4.MVC的应用</a></li>
</ul>
</li>
<li><a href="#三课程作业">三、课程作业</a></li>
</ul>
</li>
</ul>
</div>
</div>
</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="chqp" id="一学习目标"><strong>一、学习目标</strong></h2><ul data-anchor-id="znld">
<li>代码自定义UITableViewCell</li>
<li>xib自定义UITableViewCell</li>
<li>MVC的应用</li>
</ul><hr><div class="md-section-divider"></div><h2 data-anchor-id="6mj3" id="二课程内容"><strong>二、课程内容</strong></h2><div class="md-section-divider"></div><h3 data-anchor-id="e7kp" id="1代码自定义uitableviewcell"><strong>1.代码自定义UITableViewCell</strong></h3><p data-anchor-id="w4ak">系统自带的UITableViewCell往往不能满足我们的业务需求。现在我们来学习如何用代码自定义一个Cell。让我们模仿微信的聊天列表。</p><p data-anchor-id="j444"><img src="http://static.zybuluo.com/zhuoming/5qb0ee3exvmmdibue2xlitui/1.1_zh_CN.png" alt="1.1_zh_CN.png-114kB" title=""> <br>
<strong>先来做一些准备工作</strong> <br>
利用UITabarController+UINavigationController搭建一个框架  <br>
<img src="http://static.zybuluo.com/zhuoming/rqabtmnnl3x4hs7h9zm3jdbf/xib178png.png" alt="xib178png.png-24.7kB" title=""> <br>
准备一些假数据，建立一个模型数组</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="wylx"><ol class="linenums"><li class="L0"><code><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ChetListModel</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">NSObject</span></code></li><li class="L1"><code><span class="com">// 好友名字</span></code></li><li class="L2"><code><span class="lit">@property</span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln">copy</span><span class="pun">)</span><span class="typ">NSString</span><span class="pun">*</span><span class="pln"> name</span><span class="pun">;</span></code></li><li class="L3"><code><span class="com">// 图片的名字</span></code></li><li class="L4"><code><span class="lit">@property</span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln">copy</span><span class="pun">)</span><span class="typ">NSString</span><span class="pun">*</span><span class="pln"> headImg</span><span class="pun">;</span></code></li><li class="L5"><code><span class="com">// 内容</span></code></li><li class="L6"><code><span class="lit">@property</span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln">copy</span><span class="pun">)</span><span class="typ">NSString</span><span class="pun">*</span><span class="pln"> content</span><span class="pun">;</span></code></li><li class="L7"><code><span class="com">// 时间</span></code></li><li class="L8"><code><span class="lit">@property</span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln">copy</span><span class="pun">)</span><span class="typ">NSString</span><span class="pun">*</span><span class="pln"> time</span><span class="pun">;</span></code></li><li class="L9"><code><span class="lit">@end</span></code></li></ol></pre><p data-anchor-id="vfqa"><strong>代码自定义cell</strong></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="p7o6"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UITableViewCell</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView cellForRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="com">//1. 定义ID</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> ID </span><span class="pun">=</span><span class="pln"> </span><span class="pun">@</span><span class="str">"Cell"</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="com">//2. 获取cell</span></code></li><li class="L5"><code><span class="pln">    </span><span class="typ">UITableViewCell</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tableView dequeueReusableCellWithIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">cell</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UITableViewCell</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithStyle</span><span class="pun">:</span><span class="typ">UITableViewCellStyleDefault</span><span class="pln"> reuseIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L8"><code><span class="pln">        </span><span class="com">//--------------------------------------</span></code></li><li class="L9"><code><span class="pln">        </span><span class="com">// 创建自定义的cell</span></code></li><li class="L0"><code><span class="pln">        </span><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> headImg </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">44</span><span class="pun">,</span><span class="pln"> </span><span class="lit">44</span><span class="pun">)];</span></code></li><li class="L1"><code><span class="pln">        </span><span class="com">// 在从缓存池中 tag 用来获取这个view</span></code></li><li class="L2"><code><span class="pln">        headImg</span><span class="pun">.</span><span class="pln">tag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">        </span><span class="com">// 圆角</span></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">headImg</span><span class="pun">.</span><span class="pln">layer setCornerRadius</span><span class="pun">:</span><span class="lit">5.0f</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">headImg</span><span class="pun">.</span><span class="pln">layer setMasksToBounds</span><span class="pun">:</span><span class="pln">YES</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">cell</span><span class="pun">.</span><span class="pln">contentView addSubview</span><span class="pun">:</span><span class="pln">headImg</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">        </span><span class="com">//--------------------------------------</span></code></li><li class="L8"><code><span class="pln">        </span><span class="com">// 名字</span></code></li><li class="L9"><code><span class="pln">        </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbName </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UILabel</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">60</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">150</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">)];</span></code></li><li class="L0"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbName setFont</span><span class="pun">:[</span><span class="typ">UIFont</span><span class="pln"> systemFontOfSize</span><span class="pun">:</span><span class="lit">16</span><span class="pun">]];</span></code></li><li class="L1"><code><span class="pln">        lbName</span><span class="pun">.</span><span class="pln">tag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">11</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">cell</span><span class="pun">.</span><span class="pln">contentView addSubview</span><span class="pun">:</span><span class="pln">lbName</span><span class="pun">];</span></code></li><li class="L3"><code><span class="pln">        </span><span class="com">//--------------------------------------</span></code></li><li class="L4"><code><span class="pln">        </span><span class="com">// 事件</span></code></li><li class="L5"><code><span class="pln">        </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbdate </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UILabel</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">218</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">94</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)];</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbdate setAlpha</span><span class="pun">:</span><span class="lit">0.8</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbdate setFont</span><span class="pun">:[</span><span class="typ">UIFont</span><span class="pln"> systemFontOfSize</span><span class="pun">:</span><span class="lit">12</span><span class="pun">]];</span></code></li><li class="L8"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbdate setTextAlignment</span><span class="pun">:</span><span class="typ">NSTextAlignmentRight</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbdate setTextColor</span><span class="pun">:[</span><span class="typ">UIColor</span><span class="pln"> grayColor</span><span class="pun">]];</span></code></li><li class="L0"><code><span class="pln">        lbdate</span><span class="pun">.</span><span class="pln">tag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">12</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">cell</span><span class="pun">.</span><span class="pln">contentView addSubview</span><span class="pun">:</span><span class="pln">lbdate</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pln">        </span><span class="com">//--------------------------------------</span></code></li><li class="L3"><code><span class="pln">        </span><span class="com">// 内容</span></code></li><li class="L4"><code><span class="pln">        </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbContent </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UILabel</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">60</span><span class="pun">,</span><span class="lit">36</span><span class="pun">,</span><span class="pln"> </span><span class="lit">150</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)];</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbContent setTextColor</span><span class="pun">:[</span><span class="typ">UIColor</span><span class="pln"> grayColor</span><span class="pun">]];</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">lbContent setFont</span><span class="pun">:[</span><span class="typ">UIFont</span><span class="pln"> systemFontOfSize</span><span class="pun">:</span><span class="lit">14</span><span class="pun">]];</span></code></li><li class="L7"><code><span class="pln">        lbContent</span><span class="pun">.</span><span class="pln">tag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">13</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">        </span><span class="pun">[</span><span class="pln">cell</span><span class="pun">.</span><span class="pln">contentView addSubview</span><span class="pun">:</span><span class="pln">lbContent</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pln">    </span><span class="com">//4.显示数据</span></code></li><li class="L1"><code><span class="pln">    </span><span class="typ">ChetListModel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> model </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">checkModelArr</span><span class="pun">[</span><span class="pln">indexPath</span><span class="pun">.</span><span class="pln">row</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pln">    </span><span class="com">// 通过tag获取cell里面的视图</span></code></li><li class="L3"><code><span class="pln">    </span><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> headImg </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*)[</span><span class="pln">cell viewWithTag</span><span class="pun">:</span><span class="lit">10</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pln">    headImg</span><span class="pun">.</span><span class="pln">image </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:</span><span class="pln">model</span><span class="pun">.</span><span class="pln">headImg</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbName </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*)[</span><span class="pln">cell viewWithTag</span><span class="pun">:</span><span class="lit">11</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    lbName</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">    </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbdate </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*)[</span><span class="pln">cell viewWithTag</span><span class="pun">:</span><span class="lit">12</span><span class="pun">];</span></code></li><li class="L8"><code><span class="pln">    lbdate</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="pln">time</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">    </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbContent </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*)[</span><span class="pln">cell viewWithTag</span><span class="pun">:</span><span class="lit">13</span><span class="pun">];</span></code></li><li class="L0"><code><span class="pln">    lbContent</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="pln">content</span><span class="pun">;</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> cell</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="npr9">运行效果如下 <br>
<img src="http://static.zybuluo.com/zhuoming/lvho5evbs1mftit8nmer6oqv/xib19.png" alt="xib19.png-49.4kB" title=""></p><div class="md-section-divider"></div><h3 data-anchor-id="zqay" id="2代码自定义uitableviewcell优化"><strong>2.代码自定义UITableViewCell优化</strong></h3><p data-anchor-id="01c3">我们将tableViewcell子类化，以减少在VC中的代码。 <br>
// 创建一个cell的类 <code>CheckListCell</code> <br>
UITableViewCell.h</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="poey"><ol class="linenums"><li class="L0"><code><span class="lit">@interface</span><span class="pln"> </span><span class="typ">CheckListCell</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">UITableViewCell</span></code></li><li class="L1"><code><span class="lit">@property</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln"> strong</span><span class="pun">)</span><span class="pln"> </span><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> headImg</span><span class="pun">;</span></code></li><li class="L2"><code><span class="lit">@property</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln"> strong</span><span class="pun">)</span><span class="pln"> </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbName</span><span class="pun">;</span></code></li><li class="L3"><code><span class="lit">@property</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln"> strong</span><span class="pun">)</span><span class="pln"> </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbdate</span><span class="pun">;</span></code></li><li class="L4"><code><span class="lit">@property</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln"> strong</span><span class="pun">)</span><span class="pln"> </span><span class="typ">UILabel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> lbContent</span><span class="pun">;</span></code></li><li class="L5"><code><span class="com">// 拥有一个模型对象</span></code></li><li class="L6"><code><span class="lit">@property</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nonatomic</span><span class="pun">,</span><span class="pln"> strong</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ChetListModel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> model</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">instancetype</span><span class="pun">)</span><span class="pln">initWithTable</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pun">*)</span><span class="pln">tableView </span><span class="typ">Model</span><span class="pun">:(</span><span class="typ">ChetListModel</span><span class="pun">*)</span><span class="pln">model</span><span class="pun">;</span></code></li><li class="L8"><code><span class="lit">@end</span></code></li></ol></pre><p data-anchor-id="j4m0">UITableViewCell.m</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hxkd"><ol class="linenums"><li class="L0"><code><span class="lit">@implementation</span><span class="pln"> </span><span class="typ">CheckListCell</span></code></li><li class="L1"><code></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">instancetype</span><span class="pun">)</span><span class="pln">initWithTable</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pun">*)</span><span class="pln">tableView </span><span class="typ">Model</span><span class="pun">:(</span><span class="typ">ChetListModel</span><span class="pun">*)</span><span class="pln">model</span></code></li><li class="L4"><code><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">    </span><span class="com">//1. 定义ID 建议使用类名</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> ID </span><span class="pun">=</span><span class="pln"> </span><span class="pun">@</span><span class="str">"CheckListCell"</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">    </span><span class="com">//2. 获取cell</span></code></li><li class="L8"><code><span class="pln">    </span><span class="typ">CheckListCell</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tableView dequeueReusableCellWithIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">cell</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">        cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">CheckListCell</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithStyle</span><span class="pun">:</span><span class="typ">UITableViewCellStyleDefault</span><span class="pln"> reuseIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code><span class="pln">    cell</span><span class="pun">.</span><span class="pln">model </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> cell</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">instancetype</span><span class="pun">)</span><span class="pln">initWithStyle</span><span class="pun">:(</span><span class="typ">UITableViewCellStyle</span><span class="pun">)</span><span class="pln">style reuseIdentifier</span><span class="pun">:(</span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">reuseIdentifier</span></code></li><li class="L7"><code><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">    </span><span class="kwd">self</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">super</span><span class="pln"> initWithStyle</span><span class="pun">:</span><span class="pln">style reuseIdentifier</span><span class="pun">:</span><span class="pln">reuseIdentifier</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">    </span><span class="com">//--------------------------------------</span></code></li><li class="L0"><code><span class="pln">    </span><span class="com">// 创建自定义的控件</span></code></li><li class="L1"><code><span class="pln">    </span><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> headImg </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">44</span><span class="pun">,</span><span class="pln"> </span><span class="lit">44</span><span class="pun">)];</span></code></li><li class="L2"><code><span class="pln">    _headImg </span><span class="pun">=</span><span class="pln"> headImg</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">    </span><span class="com">// 这里省略了一些控件的创建</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pun">}</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="com">// 数据赋值</span></code></li><li class="L9"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">setModel</span><span class="pun">:(</span><span class="typ">ChetListModel</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">model</span></code></li><li class="L0"><code><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    _model </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">    _headImg</span><span class="pun">.</span><span class="pln">image </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:</span><span class="pln">model</span><span class="pun">.</span><span class="pln">headImg</span><span class="pun">];</span></code></li><li class="L3"><code><span class="pln">    _lbName</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    _lbdate</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="pln">time</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">    _lbContent</span><span class="pun">.</span><span class="pln">text </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="pln">content</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pun">}</span></code></li><li class="L7"><code><span class="lit">@end</span></code></li></ol></pre><p data-anchor-id="73j3">将UITableViewCell子例画了之后，我们在VC中代码就精简了很多</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="gvoa"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UITableViewCell</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView cellForRowAtIndexPath</span><span class="pun">:(</span><span class="typ">NSIndexPath</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">indexPath</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="com">// 1.获取该显示的数据</span></code></li><li class="L3"><code><span class="pln">    </span><span class="typ">ChetListModel</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> model </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">checkModelArr</span><span class="pun">[</span><span class="pln">indexPath</span><span class="pun">.</span><span class="pln">row</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pln">    </span><span class="com">// 2.创建cell</span></code></li><li class="L5"><code><span class="pln">    </span><span class="typ">CheckListCell</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">CheckListCell</span><span class="pln"> initWithTable</span><span class="pun">:</span><span class="pln">tableView </span><span class="typ">Model</span><span class="pun">:</span><span class="pln">model</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> cell</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="aoyl" id="3代码自定义uitableviewcell"><strong>3.代码自定义UITableViewCell</strong></h3><p data-anchor-id="amec">想通过Xib创建Cell  <code>CheckListXibCell</code>，只需在创建的时候勾上同时创建一个Xib file <br>
<img src="http://static.zybuluo.com/zhuoming/luv3nldqwnx1bqr8p0vxdcg1/xib20.png" alt="xib20.png-42.6kB" title=""> <br>
我们往xib的View上拖拽一些控件 <br>
<img src="http://static.zybuluo.com/zhuoming/4st4hjhm9de1uqun2wm2qwar/xib21.png" alt="xib21.png-74.4kB" title=""> <br>
同样的我们在CheckListXibCell.h添加一个model属性，而且像上面一样将代码封装起来。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="55et"><ol class="linenums"><li class="L0"><code><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">instancetype</span><span class="pun">)</span><span class="pln">initWithTable</span><span class="pun">:(</span><span class="typ">UITableView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">tableView </span><span class="typ">Model</span><span class="pun">:(</span><span class="typ">ChetListModel</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">model</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="com">//1. 定义ID 建议使用类名</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">NSString</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> ID </span><span class="pun">=</span><span class="pln"> </span><span class="pun">@</span><span class="str">"CheckListXibCell"</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="com">//2. 获取cell</span></code></li><li class="L5"><code><span class="pln">    </span><span class="typ">CheckListXibCell</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tableView dequeueReusableCellWithIdentifier</span><span class="pun">:</span><span class="pln">ID</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">cell</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        </span><span class="com">// 加载xib cell的方法</span></code></li><li class="L8"><code><span class="pln">        cell </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[[</span><span class="typ">NSBundle</span><span class="pln"> mainBundle</span><span class="pun">]</span><span class="pln">loadNibNamed</span><span class="pun">:@</span><span class="str">"CheckListXibCell"</span><span class="pln"> owner</span><span class="pun">:</span><span class="kwd">nil</span><span class="pln"> options</span><span class="pun">:</span><span class="kwd">nil</span><span class="pun">]</span><span class="pln">lastObject</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pln">    </span><span class="com">//3. 重写model的set方法 与上面一致 不再赘述</span></code></li><li class="L1"><code><span class="pln">    cell</span><span class="pun">.</span><span class="pln">model </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> cell</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="wsmx">非常值得注意的是,用xib创建的cell一定要记得在xib面板添加reuseIdentifier,否则不能实现重用。 <br>
<img src="http://static.zybuluo.com/zhuoming/9v7f087lu92ikoudg1he62xz/xib22.png" alt="xib22.png-46.1kB" title=""></p><div class="md-section-divider"></div><h3 data-anchor-id="u8nz" id="4mvc的应用"><strong>4.MVC的应用</strong></h3><p data-anchor-id="0yip">我们曾在课程4中学习过MVC模型，在刚刚的代码中有着很好的体现，UIViewController 把数据model显示在显示在tableView上。在我们后期还会有更多的MVC应用，比如用户改变了某个数据模型（微博点赞），视图是如何更新体现的。 <br>
<strong>MVC逻辑图</strong> <br>
  <img src="http://static.zybuluo.com/zhuoming/xhqoo6vvpr6dxr5wbo23ud58/2013120612.png" alt="2013120612.png-43.3kB" title=""></p><div class="md-section-divider"></div><h2 data-anchor-id="an2i" id="三课程作业"><strong>三、课程作业</strong></h2><blockquote data-anchor-id="i539" class="white-blockquote">
  <ul>
  <li>1.搭建微信的框架</li>
  <li>2.给第一个页面（checkListVC）添加一个UITableView并用代码实现功能。</li>
  <li>3.利用xib创建cell实现功能。</li>
  </ul>
</blockquote></div>
</body>
</html>