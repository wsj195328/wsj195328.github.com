<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>课程11.UIScrollView</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><img src="http://static.zybuluo.com/zhuoming/9y9ocj9x0iw2k87m7br254g1/logo.png" width="300" height="100"><span style="float:right;" data-anchor-id="jlo8"><b>求知若渴 求真教育</b></span><div class="md-section-divider"></div><h1 data-anchor-id="gcqc" id="课程11uiscrollview">课程11.UIScrollView</h1><div class="md-section-divider"></div><h2 data-anchor-id="y6xg" id="ios-ui"><code>iOS</code> <code>UI</code></h2><p data-anchor-id="pwsm"><div class="toc"><div class="toc">
<ul>
<li><a href="#课程11uiscrollview">课程11.UIScrollView</a><ul>
<li><a href="#ios-ui">iOS UI</a></li>
<li><a href="#一学习目标">一、学习目标</a></li>
<li><a href="#二课程内容">二、课程内容</a><ul>
<li><a href="#1uiscrollview介绍">1.UIScrollView介绍</a></li>
<li><a href="#2uiscrollview常用属性">2.UIScrollView常用属性</a></li>
<li><a href="#3uiscrollview的使用">3.UIScrollView的使用</a></li>
<li><a href="#4uiscrollviewdelegate">4.UIScrollViewDelegate</a></li>
<li><a href="#5uipagecontrol">5.UIPageControl</a></li>
</ul>
</li>
<li><a href="#三课程作业">三、课程作业</a></li>
</ul>
</li>
</ul>
</div>
</div>
</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="4e3p" id="一学习目标"><strong>一、学习目标</strong></h2><ul data-anchor-id="ynq0">
<li>添加多个图片到UIScrollView</li>
<li>UIScrollViewDelegate代理使用</li>
<li>广告轮播器</li>
<li>引导页面</li>
</ul><hr><div class="md-section-divider"></div><h2 data-anchor-id="xby4" id="二课程内容"><strong>二、课程内容</strong></h2><div class="md-section-divider"></div><h3 data-anchor-id="buu9" id="1uiscrollview介绍"><strong>1.UIScrollView介绍</strong></h3><p data-anchor-id="g2gg">我们的硬件设备的屏幕是有限的，所以我们用UIScrollView来显示多于一个屏幕的内容，比如一个很大的照片。滚动视图有以下两个主要作用： <br>
让用户可以通过拖拽手势来观看想看到的内容 <br>
让用户可以通过捏合手势来放大或缩小观看的内容</p><p data-anchor-id="ll2v">先让我们来看看用UIScrollView来展示一张图片：</p><div class="md-section-divider"></div><h3 data-anchor-id="5gei" id="2uiscrollview常用属性"><strong>2.UIScrollView常用属性</strong></h3><table data-anchor-id="gktf" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>属性和方法</th>
 <th>说明</th>
</tr>
</thead>
<tbody><tr>
 <td>contentOffset</td>
 <td>ScrollView当前的滚动偏移量</td>
</tr>
<tr>
 <td>contentSize</td>
 <td>ScrollView内容尺寸，当这个值大于Frame.size 即可以滚动</td>
</tr>
<tr>
 <td>contentInset</td>
 <td>在UIScrollView的4周增加额外的滚动区域</td>
</tr>
<tr>
 <td>bounces</td>
 <td>设置UIScrollView是否需要弹簧效果，到了边界是否还能拖动</td>
</tr>
<tr>
 <td>scrollEnabled</td>
 <td>能否滚动</td>
</tr>
<tr>
 <td>showsHorizontalScrollIndicator</td>
 <td>是否显⽰示⽔水平滚动条</td>
</tr>
<tr>
 <td>showsVerticalScrollIndicator</td>
 <td>是否显⽰示垂直滚动条</td>
</tr>
<tr>
 <td>pagingEnabled</td>
 <td>是否实现分页，设置成yes后，会以Frame.size将内容进行分页</td>
</tr>
<tr>
 <td><code>-()setContentOffset: animated:</code></td>
 <td>手动设置偏移量，并带上动画</td>
</tr>
</tbody></table><div class="md-section-divider"></div><h3 data-anchor-id="2n9g" id="3uiscrollview的使用"><strong>3.UIScrollView的使用</strong></h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6y1v"><ol class="linenums"><li class="L0"><code><span class="com">// 创建一个scrollView</span></code></li><li class="L1"><code><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> scrollView </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIScrollView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">view</span><span class="pun">.</span><span class="pln">bounds</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">view addSubview</span><span class="pun">:</span><span class="pln">scrollView</span><span class="pun">];</span></code></li><li class="L3"><code><span class="com">// 往里面添加一个比较大的UIImage</span></code></li><li class="L4"><code><span class="typ">UIImage</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> img </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:@</span><span class="str">"scroll.jpg"</span><span class="pun">];</span></code></li><li class="L5"><code><span class="com">// 创建一个UIImageView并且将imageView的frame设置成图片的宽高。</span></code></li><li class="L6"><code><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> imgV </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithImage</span><span class="pun">:</span><span class="pln">img</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">imgV</span><span class="pun">.</span><span class="pln">frame </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> img</span><span class="pun">.</span><span class="pln">size</span><span class="pun">.</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> img</span><span class="pun">.</span><span class="pln">size</span><span class="pun">.</span><span class="pln">height</span><span class="pun">);</span></code></li><li class="L8"><code><span class="pun">[</span><span class="pln">scrollView addSubview</span><span class="pun">:</span><span class="pln">imgV</span><span class="pun">];</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="com">// 更改scrollView的contentSize</span></code></li><li class="L1"><code><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">contentSize </span><span class="pun">=</span><span class="pln"> img</span><span class="pun">.</span><span class="pln">size</span><span class="pun">;</span></code></li></ol></pre><p data-anchor-id="y02o">下图是运行结果可图解，大家务必仔细了解每一个属性。形象的说UIScrollView像一个窗口，上面的View像一个画布，我们可以拖动画布来查看上面的View。它的位置和大小由自身的<strong>Frame</strong>决定。它的滚动范围由<strong>contentSize</strong>决定，偏移到哪个位置由<strong>contentOffset</strong>决定 <br>
<img src="http://static.zybuluo.com/zhuoming/pvuhn1132yxhmp9jq2gqykee/scroller1.png" alt="scroller1.png-385kB" title=""></p><div class="md-section-divider"></div><h3 data-anchor-id="sqdc" id="4uiscrollviewdelegate"><strong>4.UIScrollViewDelegate</strong></h3><p data-anchor-id="jbfd">UIScrollView像之前UItextField一样，提供一些代理方法让我们监听它的各种事件和状态。 <br>
让VC成为UIScrollView的代理，并实现以下方法</p><blockquote data-anchor-id="64dm" class="white-blockquote">
  <p>通过打印方法，可以了解到各个代理的运行顺序和触发条件</p>
</blockquote><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6v6z"><ol class="linenums"><li class="L0"><code><span class="com">#pragma</span><span class="pln"> mark </span><span class="typ">UIScrollViewDelegate</span></code></li><li class="L1"><code><span class="com">//只要滚动了就会触发</span></code></li><li class="L2"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidScroll</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">   </span></code></li><li class="L3"><code><span class="pun">{</span></code></li><li class="L4"><code><span class="com">//    NSLog(@" scrollViewDidScroll");</span></code></li><li class="L5"><code><span class="pln">    </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"ContentOffset  x is  %f,yis %f"</span><span class="pun">,</span><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">contentOffset</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">contentOffset</span><span class="pun">.</span><span class="pln">y</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pun">}</span></code></li><li class="L7"><code><span class="com">//开始拖拽视图</span></code></li><li class="L8"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewWillBeginDragging</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">   </span></code></li><li class="L9"><code><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewWillBeginDragging"</span><span class="pun">);</span></code></li><li class="L1"><code><span class="pun">}</span></code></li><li class="L2"><code><span class="com">//完成拖拽</span></code></li><li class="L3"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidEndDragging</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView willDecelerate</span><span class="pun">:(</span><span class="pln">BOOL</span><span class="pun">)</span><span class="pln">decelerate</span><span class="pun">;</span><span class="pln"> </span></code></li><li class="L4"><code><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewDidEndDragging"</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pun">}</span></code></li><li class="L7"><code><span class="com">//将开始降速时</span></code></li><li class="L8"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewWillBeginDecelerating</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">   </span></code></li><li class="L9"><code><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewWillBeginDecelerating"</span><span class="pun">);</span></code></li><li class="L1"><code><span class="pun">}</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="com">//减速停止了时执行，手触摸时执行执行</span></code></li><li class="L4"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidEndDecelerating</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">   </span></code></li><li class="L5"><code><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewDidEndDecelerating"</span><span class="pun">);</span></code></li><li class="L7"><code><span class="pun">}</span></code></li><li class="L8"><code><span class="com">//滚动动画停止时执行,代码改变时出发,也就是setContentOffset改变时</span></code></li><li class="L9"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidEndScrollingAnimation</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewDidEndScrollingAnimation"</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pun">}</span></code></li><li class="L3"><code><span class="com">//设置放大缩小的视图，要是uiscrollview的subview</span></code></li><li class="L4"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UIView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">viewForZoomingInScrollView</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">   </span></code></li><li class="L5"><code><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"viewForZoomingInScrollView"</span><span class="pun">);</span></code></li><li class="L7"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> viewA</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pun">}</span></code></li><li class="L9"><code><span class="com">//完成放大缩小时调用</span></code></li><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidEndZooming</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView withView</span><span class="pun">:(</span><span class="typ">UIView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">view atScale</span><span class="pun">:(</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">scale</span><span class="pun">;</span><span class="pln"> </span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    viewA</span><span class="pun">.</span><span class="pln">frame</span><span class="pun">=</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">50</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">100</span><span class="pun">,</span><span class="lit">400</span><span class="pun">);</span></code></li><li class="L3"><code><span class="pln">   </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scale between minimum and maximum. called after any 'bounce' animations"</span><span class="pun">);</span></code></li><li class="L4"><code><span class="pun">}</span><span class="com">// scale between minimum and maximum. called after any 'bounce' animations</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="com">//如果你不是完全滚动到滚轴视图的顶部，你可以轻点状态栏，那个可视的滚轴视图会一直滚动到顶部，那是默认行为，你可以通过该方法返回NO来关闭它</span></code></li><li class="L7"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">BOOL</span><span class="pun">)</span><span class="pln">scrollViewShouldScrollToTop</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">   </span></code></li><li class="L8"><code><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">    </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewShouldScrollToTop"</span><span class="pun">);</span></code></li><li class="L0"><code><span class="pln">   returnYES</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pun">}</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidScrollToTop</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span><span class="pun">;</span><span class="pln">     </span></code></li><li class="L4"><code><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">    </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"scrollViewDidScrollToTop"</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="5kxq" id="5uipagecontrol"><strong>5.UIPageControl</strong></h3><p data-anchor-id="0q7g">我们尝尝看到一下分页的滚动视图会用几个小点来告诉用户当前的页数。比如iPhone的桌面 </p><p data-anchor-id="u6v3"><img src="http://static.zybuluo.com/zhuoming/uwhqjk3dh65sx5w9mi00mgyx/scroll1.pic.jpg" alt="scroll1.pic.jpg-41.4kB" title=""></p><p data-anchor-id="cxkl"><strong>UIPageControl 的属性和方法</strong> </p><table data-anchor-id="ijfo" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>属性和方法</th>
 <th>说明</th>
</tr>
</thead>
<tbody><tr>
 <td>numberOfPages</td>
 <td>总页数</td>
</tr>
<tr>
 <td>currentPage</td>
 <td>当前页数</td>
</tr>
<tr>
 <td>hidesForSinglePage</td>
 <td>单页是否隐藏</td>
</tr>
<tr>
 <td>pageIndicatorTintColor</td>
 <td>一般的小点颜色</td>
</tr>
<tr>
 <td>currentPageIndicatorTintColor</td>
 <td>当前页的小点的颜色</td>
</tr>
</tbody></table><p data-anchor-id="lodv"><strong>UIPageControl和UIScrollView关联显示</strong> </p><p data-anchor-id="d87t">主要思路是根据UIScrollView的偏移量来计算当前的页数，并赋值给PageControl。UIPageControl也是可以交互的，根据当前页数设置UIScrollView的偏移量。这个相对的动作。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="n1xc"><ol class="linenums"><li class="L0"><code><span class="com">// 创建一个scrollView</span></code></li><li class="L1"><code><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> scrollView </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIScrollView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">22</span><span class="pun">,</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">160</span><span class="pun">)];</span></code></li><li class="L2"><code><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">view addSubview</span><span class="pun">:</span><span class="pln">scrollView</span><span class="pun">];</span></code></li><li class="L3"><code><span class="com">// 添加三个UIImageView</span></code></li><li class="L4"><code><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> imgV1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">160</span><span class="pun">)];</span></code></li><li class="L5"><code><span class="pln">imgV1</span><span class="pun">.</span><span class="pln">image </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:@</span><span class="str">"banner1.jpg"</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pun">[</span><span class="pln">scrollView addSubview</span><span class="pun">:</span><span class="pln">imgV1</span><span class="pun">];</span></code></li><li class="L7"><code><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> imgV2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">160</span><span class="pun">)];</span></code></li><li class="L8"><code><span class="pln">imgV2</span><span class="pun">.</span><span class="pln">image </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:@</span><span class="str">"banner2.jpg"</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pun">[</span><span class="pln">scrollView addSubview</span><span class="pun">:</span><span class="pln">imgV2</span><span class="pun">];</span></code></li><li class="L0"><code><span class="typ">UIImageView</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> imgV3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIImageView</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">640</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">160</span><span class="pun">)];</span></code></li><li class="L1"><code><span class="pln">imgV3</span><span class="pun">.</span><span class="pln">image </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIImage</span><span class="pln"> imageNamed</span><span class="pun">:@</span><span class="str">"banner3.jpg"</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pun">[</span><span class="pln">scrollView addSubview</span><span class="pun">:</span><span class="pln">imgV3</span><span class="pun">];</span></code></li><li class="L3"><code><span class="com">// 更改scrollView的contentSize 因为在垂直方向不需要滚动，可以设置为0</span></code></li><li class="L4"><code><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">contentSize </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CGSizeMake</span><span class="pun">(</span><span class="lit">3</span><span class="pun">*</span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></code></li><li class="L5"><code><span class="com">// 设置分页</span></code></li><li class="L6"><code><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">pagingEnabled </span><span class="pun">=</span><span class="pln"> YES</span><span class="pun">;</span></code></li><li class="L7"><code><span class="com">//添加UIPageControl</span></code></li><li class="L8"><code><span class="typ">UIPageControl</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> pageCotrol </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="typ">UIPageControl</span><span class="pln"> alloc</span><span class="pun">]</span><span class="pln">initWithFrame</span><span class="pun">:</span><span class="typ">CGRectMake</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">150</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30</span><span class="pun">)];</span></code></li><li class="L9"><code><span class="pln">pageCotrol</span><span class="pun">.</span><span class="pln">numberOfPages </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">pageCotrol</span><span class="pun">.</span><span class="pln">pageIndicatorTintColor </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIColor</span><span class="pln"> whiteColor</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pln">pageCotrol</span><span class="pun">.</span><span class="pln">currentPageIndicatorTintColor </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">UIColor</span><span class="pln"> redColor</span><span class="pun">];</span></code></li><li class="L2"><code><span class="com">// 注意不是添加到scrollView上</span></code></li><li class="L3"><code><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">view addSubview</span><span class="pun">:</span><span class="pln">pageCotrol</span><span class="pun">];</span></code></li></ol></pre><p data-anchor-id="qejv">通过scrollView的代理方法，达到拖动scrollview的时候pageControl也会随之改动。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="cb31"><ol class="linenums"><li class="L0"><code><span class="com">#pragma</span><span class="pln"> mark </span><span class="pun">-</span><span class="pln"> </span><span class="typ">UIScrollViewDelegate</span></code></li><li class="L1"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">scrollViewDidScroll</span><span class="pun">:(</span><span class="typ">UIScrollView</span><span class="pln"> </span><span class="pun">*)</span><span class="pln">scrollView</span></code></li><li class="L2"><code><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">int</span><span class="pln"> curPage </span><span class="pun">=</span><span class="pln"> scrollView</span><span class="pun">.</span><span class="pln">contentOffset</span><span class="pun">.</span><span class="pln">x </span><span class="pun">/</span><span class="pln"> scrollView</span><span class="pun">.</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">size</span><span class="pun">.</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="com">// 多加这个可以达到往回滚动完全才更改 pageControl.currentPage</span></code></li><li class="L5"><code><span class="pln">    </span><span class="kwd">float</span><span class="pln"> offsetX </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">contentOffset</span><span class="pun">.</span><span class="pln">x </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">size</span><span class="pun">.</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">offsetX </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">        </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">pageControl</span><span class="pun">.</span><span class="pln">currentPage </span><span class="pun">=</span><span class="pln"> curPage</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="od75">给pageControl添加点击事件,根据当前页数，更改scrollView的偏移量</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zni4"><ol class="linenums"><li class="L0"><code><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">pageControl addTarget</span><span class="pun">:</span><span class="kwd">self</span><span class="pln"> action</span><span class="pun">:</span><span class="lit">@selector</span><span class="pun">(</span><span class="pln">pageControlCLick</span><span class="pun">:)</span><span class="pln"> forControlEvents</span><span class="pun">:</span><span class="typ">UIControlEventValueChanged</span><span class="pun">];</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="sjuy"><ol class="linenums"><li class="L0"><code><span class="com">// 点击左右两边来达到加一或者减一</span></code></li><li class="L1"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">pageControlCLick</span><span class="pun">:(</span><span class="typ">UIPageControl</span><span class="pun">*)</span><span class="pln">pageControl</span></code></li><li class="L2"><code><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    </span><span class="typ">NSLog</span><span class="pun">(@</span><span class="str">"%ld"</span><span class="pun">,</span><span class="pln">pageControl</span><span class="pun">.</span><span class="pln">currentPage</span><span class="pun">);</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">scrollView setContentOffset</span><span class="pun">:</span><span class="typ">CGPointMake</span><span class="pun">(</span><span class="pln">pageControl</span><span class="pun">.</span><span class="pln">currentPage </span><span class="pun">*</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> animated</span><span class="pun">:</span><span class="pln">YES</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="ons8"><img src="http://static.zybuluo.com/zhuoming/ym1jpwrn8b57opc2p6n3ihme/xib11.gif" alt="xib11.gif-2678.3kB" title=""></p><p data-anchor-id="bdsn"><strong>NStimer</strong>  <br>
一般的广告都是自动播放的，我们添加一个定时器就可以实现</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="r0at"><ol class="linenums"><li class="L0"><code><span class="typ">NSTimer</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> timer </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="typ">NSTimer</span><span class="pln"> scheduledTimerWithTimeInterval</span><span class="pun">:</span><span class="lit">1.f</span><span class="pln"> target</span><span class="pun">:</span><span class="kwd">self</span><span class="pln"> selector</span><span class="pun">:</span><span class="lit">@selector</span><span class="pun">(</span><span class="pln">nextPage</span><span class="pun">)</span><span class="pln"> userInfo</span><span class="pun">:</span><span class="kwd">nil</span><span class="pln"> repeats</span><span class="pun">:</span><span class="pln">YES</span><span class="pun">];</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="jkqf"><ol class="linenums"><li class="L0"><code><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span><span class="pln">nextPage</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="kwd">int</span><span class="pln"> curPage </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">contentOffset</span><span class="pun">.</span><span class="pln">x </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">scrollView</span><span class="pun">.</span><span class="pln">frame</span><span class="pun">.</span><span class="pln">size</span><span class="pun">.</span><span class="pln">width</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">    curPage</span><span class="pun">++;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">curPage </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">  curPage </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">[</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">scrollView setContentOffset</span><span class="pun">:</span><span class="typ">CGPointMake</span><span class="pun">(</span><span class="pln">curPage </span><span class="pun">*</span><span class="pln"> </span><span class="lit">320</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> animated</span><span class="pun">:</span><span class="pln">YES</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="bqsy"><img src="http://static.zybuluo.com/zhuoming/q1bs5hmdgumwi26cymx11txh/xib10.gif" alt="xib10.gif-613.3kB" title=""></p><div class="md-section-divider"></div><h2 data-anchor-id="0391" id="三课程作业"><strong>三、课程作业</strong></h2><blockquote data-anchor-id="ora3" class="white-blockquote">
  <ul>
  <li>1.做一个展示广告ScrollView</li>
  <li>2.加上PageControl,并关联</li>
  <li>3.加上定时器</li>
  <li>4.提高：解决拖拽事件和定时器的冲突</li>
  <li>5.提高：实现从最后一页继续向右滚动到第一页</li>
  </ul>
</blockquote></div>
</body>
</html>